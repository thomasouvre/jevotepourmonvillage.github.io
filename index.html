<!DOCTYPE html>
<html>

<head>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/plyr/3.4.8/plyr.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plyr/3.4.8/plyr.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.js"></script>

    <style>
        .video-section .item {
            opacity: 0.4;
            transition: .4s ease all;
            margin: 0 20px;
            transform: scale(.8);
        }

        @media(max-width:1000px) {
            .video-section .item {
                margin: 0;
                transform: scale(.9)
            }
        }

        .video-section .active .item {
            opacity: 1;
            transform: scale(1);
        }

        .video-section .owl-item {
            -webkit-backface-visibility: hidden;
            -webkit-transform: translateZ(0) scale(1.0, 1.0);
        }

        .video-section video {
            max-width: 100%;
            height: auto;
            max-height: 80vh;
        }

        .plyr--video,
        .plyr__video-wrapper,
        .plyr__poster {
            background: transparent;
            /* background-color: green; */
        }

        video {
            /* background-color: red; */
        }
    </style>

</head>

<body>
    <div class="owl-carousel video-section"></div>
</body>

<script type="text/javascript">

    // Array of video URLs
    const videoUrls = [
        "https://videos.files.wordpress.com/P2Y90yw7/passerelle-part-2-v2-bd.mp4",
        "https://videos.files.wordpress.com/keTwE5Gb/cabinet-medical-bd.mp4",
        "https://videos.files.wordpress.com/pOtgUetR/source-de-st-apolline-bd.mp4",
        "https://videos.files.wordpress.com/mSw67MQz/hopital-de-jour-bd.mp4",
        "https://videos.files.wordpress.com/2QZJHhAM/carrefour-courtesoupe-et-lavoir-bd.mp4",
        "https://videos.files.wordpress.com/WgdjkzD8/nouveau-chemin-de-randonnee-passerelle-bd.mp4",
        "https://videos.files.wordpress.com/gV60zUnC/parking-rue-courtesoupe-v2-bd.mp4",
        "https://videos.files.wordpress.com/OSMfEOIG/publication-11_-rue-de-paradis-bd.mp4",
        "https://videos.files.wordpress.com/9JKMk0CP/publication-8_-le-vieux-saint-augustin-bd.mp4"
    ];

    // Function to create video players from the array
    function createVideoPlayers() {
        const videoSection = $('.video-section');

        videoUrls.forEach(function (url) {
            const videoItem = `
                <div class="item">
                    <div>
                        <video class="js-player" crossorigin playsinline>
                            <source src="${url}" type="video/mp4">
                        </video>
                    </div>
                </div>
            `;
            videoSection.append(videoItem);
        });
    }

    function debug_init() {
        // Create video players from array
        createVideoPlayers();
        $('.owl-carousel').owlCarousel({
            // stagePadding: 200,
            loop: true,
            // margin: 10,
            items: 1,
            nav: true,
            responsive: {
                0: {
                    items: 1,
                    stagePadding: 60
                },
                600: {
                    items: 1,
                    stagePadding: 100
                },
                1000: {
                    items: 1,
                    stagePadding: 200
                },
                1200: {
                    items: 1,
                    stagePadding: 250
                },
                1400: {
                    items: 1,
                    stagePadding: 300
                },
                1600: {
                    items: 1,
                    stagePadding: 350
                },
                1800: {
                    items: 1,
                    stagePadding: 400
                }
            }
        })

        var playerSettings = {
            // enabled: true,
            controls: ['play-large'],
            fullscreen: { enabled: false },
            resetOnEnd: true,
            hideControls: true,
            clickToPlay: true,
            keyboard: false,
            // playsinline: true,
            // muted: false,
            debug: true,
        }

        const players = Plyr.setup('.js-player', playerSettings);

        players.forEach(function (instance, index) {
            // Force load first frame
            instance.media.load();
            instance.muted = true;

            instance.on('play', function () {
                console.log('play', instance)
                instance.muted = false;
                players.forEach(function (instance1, index1) {
                    if (instance != instance1) {
                        console.log('pause', instance1)
                        instance1.pause();
                    }
                });
            });
        });

        $('.video-section').on('translated.owl.carousel', function (event) {
            players.forEach(function (instance, index1) {
                instance.pause();
            });
        });
    }
    debug_init()


</script>

</html>